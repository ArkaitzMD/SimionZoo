<Window x:Class="Badger.Views.MainWindowView"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:vm="clr-namespace:Badger.ViewModels"
        xmlns:cal="http://www.caliburnproject.org"
        xmlns:v="clr-namespace:Badger.Views"
        xmlns:i="http://schemas.microsoft.com/expression/2010/interactivity"
        WindowStyle="ThreeDBorderWindow"
        Title="Badger" Width="960" Height="600"
        Icon="/badger-head.ico">

    <Window.Resources>
        <DataTemplate DataType="{x:Type vm:ExperimentViewModel}">
            <v:ExperimentView/>
        </DataTemplate>
        <DataTemplate DataType="{x:Type vm:StatsViewModel}">
            <v:StatsView/>
        </DataTemplate>
    </Window.Resources>

    <DockPanel>
        <WrapPanel DockPanel.Dock="Top" MinHeight="48" Width="Auto" Background="#EEEEEE">
            <WrapPanel Margin="5,4">
                <Button Style="{StaticResource BadgerButtonStyle}" ToolTip="New Experiment"
                        Width="40" Height="40" cal:Message.Attach="[Event Click]=[Action NewExperiment()]">
                    <Path Data="{StaticResource New}" Width="24" Height="24" Fill="#89000000" />
                </Button>
                <Button Style="{StaticResource BadgerButtonStyle}" ToolTip="Save Experiment"
                        Height="40" Width="40" IsEnabled="{Binding Path=IsExperimentListNotEmpty}"
                        cal:Message.Attach="[Event Click]=[Action SaveSelectedExperiment()]">
                    <Path Data="{StaticResource Save}" Width="24" Height="24" Fill="#89000000" />
                </Button>
                <Button Style="{StaticResource BadgerButtonStyle}" ToolTip="Save All Experiments"
                        Height="40" Width="40" IsEnabled="{Binding Path=IsExperimentListNotEmpty}"
                        cal:Message.Attach="[Event Click]=[Action SaveAllExperiments()]">
                    <Path Data="{StaticResource SaveAll}" Width="24" Height="24" Fill="#89000000" />
                </Button>
                <Button Style="{StaticResource BadgerButtonStyle}" ToolTip="Open Experiment"
                        Width="40" Height="40" cal:Message.Attach="[Event Click]=[Action LoadExperiment()]">
                    <Path Data="{StaticResource Open}" Width="24" Height="24" Fill="#89000000" />
                </Button>
                <Button Style="{StaticResource BadgerButtonStyle}"  ToolTip="Open Set of Experiments"
                        Width="40" Height="40" cal:Message.Attach="[Event Click]=[Action LoadExperiments()]">
                    <Path Data="{StaticResource OpenProject}" Width="24" Height="24" Fill="#89000000" />
                </Button>

                <Separator Style="{StaticResource {x:Static ToolBar.SeparatorStyleKey}}" Margin="4" />

                <!--Label VerticalAlignment="Center">App</-->
                <ComboBox x:Name="AppNames" MinWidth="120" HorizontalAlignment="Center" VerticalAlignment="Center"
                      ToolTip="Apps" Margin="5,0" Height="26" SelectedItem="{Binding selectedAppName}" />
                <ComboBox x:Name="LaunchMode" MinWidth="140" HorizontalAlignment="Center" VerticalAlignment="Center"
                      ToolTip="Launch Modes" Margin="5,0" Height="26" SelectedItem="{Binding SelectedLaunchMode}" />

                <StackPanel Orientation="Horizontal" HorizontalAlignment="Center">
                    <Button Style="{StaticResource BadgerButtonStyle}" Width="Auto" Height="40"
                        IsEnabled="{Binding Path = CanLaunchExperiment}" ToolTip="Run Experiments"
                        cal:Message.Attach="[Event Click]=[Action RunExperiments()]">
                        <StackPanel Orientation="Horizontal">
                            <Path Data="{StaticResource Play}" Width="24" Height="24" Fill="#4CAF50" />
                            <Label Padding="4,3" VerticalContentAlignment="Center">Launch</Label>
                        </StackPanel>
                    </Button>
                    <!--Button Width="100" Height="30" Margin="5"
                         IsEnabled="{Binding Path = IsExperimentRunning}"
                         x:Name="StopExperiments" VerticalAlignment="Top"
                            ToolTip="Stop experiments in queue">
                    <StackPanel Orientation="Horizontal">
                        <Label Margin="0,0,5,0">STOP</Label>
                        <Image Width="20" Height="20" Source="{StaticResource stop}"></Image>
                    </StackPanel>
                </Button-->
                    <Separator Style="{StaticResource {x:Static ToolBar.SeparatorStyleKey}}" Margin="4" />

                    <Button Style="{StaticResource BadgerButtonStyle}" Width="Auto" Height="40"
                        cal:Message.Attach="[Event Click]=[Action ShowReportsWindow()]"
                        ToolTip="Generate reports from stored experiment results">
                        <StackPanel Orientation="Horizontal" Margin="4,0">
                            <Path Data="{StaticResource Plot}" Width="24" Height="24" Fill="#89000000" />
                            <Label Padding="4,3">Reports</Label>
                        </StackPanel>
                    </Button>
                </StackPanel>
            </WrapPanel>
        </WrapPanel>

        <Grid Background="#FAFAFA">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto" />
                <RowDefinition Height="*" />
            </Grid.RowDefinitions>
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto" MinWidth="30" />
                <ColumnDefinition Width="4" />
                <ColumnDefinition Width="5*" MinWidth="40" />
            </Grid.ColumnDefinitions>

            <StackPanel Grid.Row="0" Grid.Column="0" VerticalAlignment="Center"
                        HorizontalAlignment="Center" Orientation="Horizontal" >
                <Image Width="25" Height="25" Margin="5" Source="{StaticResource HerdAgentHead}"/>
                <Label FontWeight="Medium" VerticalAlignment="Center">Herd Agents</Label>
            </StackPanel>

            <Border Grid.Row="1" Grid.Column="0" BorderThickness="1" Margin="5,0,0,5" BorderBrush="#BDBDBD" >
                <ContentControl x:Name="ShepherdViewModel" />
            </Border>

            <GridSplitter Grid.Row="0" Grid.Column="1" Grid.RowSpan="2" Width="4" Background="#FAFAFA"
                          x:Name="GridSplitter" HorizontalAlignment="Stretch" />

            <StackPanel Grid.Row="0" Grid.Column="2" VerticalAlignment="Center" >
                <Label Content="Experiment Editor" FontWeight="Medium"
                        VerticalContentAlignment="Center" HorizontalAlignment="Center" />
            </StackPanel>

            <TabControl Grid.Row="1" Grid.Column="2" x:Name="ExperimentViewModels" Margin="0,0,5,5"
                        Padding="0" SelectedItem="{Binding Path = selectedExperiment}">
                <TabControl.ItemTemplate>
                    <DataTemplate>
                        <StackPanel Orientation="Horizontal" >
                            <TextBox Text="{Binding Path=name,Mode=TwoWay}" BorderBrush="Transparent"
                                   VerticalAlignment="Center"/>
                            <Label Content="{Binding Path=numForkCombinations}" VerticalAlignment="Center"/>
                            <Button Style="{StaticResource BadgerButtonStyle}" Width="18" Height="18">
                                <i:Interaction.Triggers>
                                    <i:EventTrigger EventName="Click">
                                        <cal:ActionMessage MethodName="Close" >
                                            <cal:Parameter Value="{Binding BindsDirectlyToSource=True}" />
                                        </cal:ActionMessage>
                                    </i:EventTrigger>
                                </i:Interaction.Triggers>
                                <Path Data="{StaticResource Close}" Width="24" Height="24" Fill="#89000000"
                                      HorizontalAlignment="Center" VerticalAlignment="Center" Margin="3" />
                            </Button>
                        </StackPanel>
                    </DataTemplate>
                </TabControl.ItemTemplate>
            </TabControl>
        </Grid>
    </DockPanel>
</Window>
