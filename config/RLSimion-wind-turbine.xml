<?xml version="1.0" encoding="utf-8"?>
<RLSimion>
  <World>
    <Dynamic-Model>
      <Wind-turbine>
        <World-Definition>..\config\world-wind-turbine.xml</World-Definition>
        <Evaluation-Wind-Data>..\config\wind-turbine\setpoints\TurbSim-10.25.hh</Evaluation-Wind-Data>
        <Training-Wind-Data>
          <File>../config/wind-turbine/setpoints/TurbSim-10.25.hh</File>
          <!--<File>../config/wind-turbine/setpoints/TurbSim-9.hh</File>
          <File>../config/wind-turbine/setpoints/TurbSim-9.5.hh</File>
          <File>../config/wind-turbine/setpoints/TurbSim-10.hh</File>
          <File>../config/wind-turbine/setpoints/TurbSim-10.5.hh</File>
          <File>../config/wind-turbine/setpoints/TurbSim-11.hh</File>
          <File>../config/wind-turbine/setpoints/TurbSim-11.5.hh</File>
          <File>../config/wind-turbine/setpoints/TurbSim-12.hh</File>    -->      
        </Training-Wind-Data>
        <Power-Set-Point>../config/wind-turbine/setpoints/windturbine-power-setpoint.txt</Power-Set-Point>
      </Wind-turbine>
    </Dynamic-Model>
    <Delta-T>0.01</Delta-T>
    <Num-Simulation-Steps>4</Num-Simulation-Steps>
    <Reward>
      <Min>-100</Min>
      <Max>1.0</Max>
      <Reward-components>
        <Deviation-Component>
          <Weight>1.0</Weight>
          <Tolerance>10</Tolerance>
          <Variable>E_p</Variable>
        </Deviation-Component>
        <Deviation-Component>
          <Weight>1.0</Weight>
          <Tolerance>0.02</Tolerance>
          <Variable>E_omega_r</Variable>
        </Deviation-Component>
        <Deviation-Component>
          <Weight>1.0</Weight>
          <Tolerance>12000</Tolerance>
          <Variable>d_T_g</Variable>
        </Deviation-Component>
        <Deviation-Component>
          <Weight>1.0</Weight>
          <Tolerance>0.1745</Tolerance>
          <Variable>d_beta</Variable>
        </Deviation-Component>
      </Reward-components>
    </Reward>
  </World>
  <Experiment>
    <Num-Episodes>1000</Num-Episodes>
    <Episode-Length>360</Episode-Length>
    <Random-Seed>1</Random-Seed>
    <Eval-Freq>50</Eval-Freq>
    <Log>
      <Freq>0.25</Freq>
      <Ouput-directory>wind-turbine-2</Ouput-directory>
      <Prefix>wt-learn-vidal</Prefix>
      <Log-eval-episodes>true</Log-eval-episodes>
      <Log-training-episodes>false</Log-training-episodes>
      <Log-eval-avg-rewards>true</Log-eval-avg-rewards>
    </Log>
  </Experiment>
  <SimGod>
    <Actor>
      <VFA-Learner>
        <Load>../data/vidal-80.bin</Load>
        <Outputs>
          <CACLA>
              <VFA-Policy>
                <Output-Action>d_beta</Output-Action>
                <Linear-VFA>
                  <RBF-Grid>
                    <RBF-Grid-Dimension>
                      <Variable>omega_r</Variable>
                      <Num-Features>80</Num-Features>
                      <Distribution>cubic</Distribution>
                    </RBF-Grid-Dimension>
                    <RBF-Grid-Dimension>
                      <Variable>d_omega_r</Variable>
                      <Num-Features>80</Num-Features>
                      <Distribution>cubic</Distribution>
                    </RBF-Grid-Dimension>
                    <RBF-Grid-Dimension>
                      <Variable>T_g</Variable>
                      <Num-Features>80</Num-Features>
                      <Distribution>linear</Distribution>
                    </RBF-Grid-Dimension>
                    <RBF-Grid-Dimension>
                      <Variable>E_p</Variable>
                      <Num-Features>80</Num-Features>
                      <Distribution>cubic</Distribution>
                    </RBF-Grid-Dimension>
                  </RBF-Grid>
                </Linear-VFA>
                <Exploration-Noise>
                  <GaussianNoise>
                    <Sigma>1.0</Sigma>
                    <Alpha>1.0</Alpha>
                    <Scale>
                      <Linear-Schedule>
                        <Start-Offset>0.0</Start-Offset>
                        <Pre-Offset-Value>0.0</Pre-Offset-Value>
                        <Interpolation>linear</Interpolation>
                        <Initial-Value>0.001</Initial-Value>
                        <End-Value>0.0</End-Value>
                        <Evaluation-Value>0.0</Evaluation-Value>
                      </Linear-Schedule>
                    </Scale>
                  </GaussianNoise>
              </Exploration-Noise>
              </VFA-Policy>
            <Alpha>
              <Linear-Schedule>
                <Start-Offset>0.0</Start-Offset>
                <Interpolation>linear</Interpolation>
                <Initial-Value>0.001</Initial-Value>
                <End-Value>0.00001</End-Value>
                <Evaluation-Value>0.0</Evaluation-Value>
              </Linear-Schedule>
            </Alpha>
          </CACLA>
          <CACLA>
            <VFA-Policy>
              <Output-Action>d_T_g</Output-Action>
              <Linear-VFA>
                <RBF-Grid>
                  <RBF-Grid-Dimension>
                    <Variable>omega_r</Variable>
                    <Num-Features>80</Num-Features>
                    <Distribution>cubic</Distribution>
                  </RBF-Grid-Dimension>
                  <RBF-Grid-Dimension>
                    <Variable>d_omega_r</Variable>
                    <Num-Features>80</Num-Features>
                    <Distribution>cubic</Distribution>
                  </RBF-Grid-Dimension>
                  <RBF-Grid-Dimension>
                    <Variable>T_g</Variable>
                    <Num-Features>80</Num-Features>
                    <Distribution>linear</Distribution>
                  </RBF-Grid-Dimension>
                  <RBF-Grid-Dimension>
                    <Variable>E_p</Variable>
                    <Num-Features>80</Num-Features>
                    <Distribution>cubic</Distribution>
                  </RBF-Grid-Dimension>
                </RBF-Grid>
              </Linear-VFA>
              <Exploration-Noise>
                <GaussianNoise>
                  <Sigma>1.0</Sigma>
                  <Alpha>1.0</Alpha>
                  <Scale>
                    <Linear-Schedule>
                      <Start-Offset>0.0</Start-Offset>
                      <Pre-Offset-Value>0.0</Pre-Offset-Value>
                      <Interpolation>linear</Interpolation>
                      <Initial-Value>10.0</Initial-Value>
                      <End-Value>0.0</End-Value>
                      <Evaluation-Value>0.0</Evaluation-Value>
                    </Linear-Schedule>
                  </Scale>
                </GaussianNoise>
              </Exploration-Noise>
            </VFA-Policy>
            <Alpha>
              <Linear-Schedule>
                <Start-Offset>0.0</Start-Offset>
                <Interpolation>linear</Interpolation>
                <Initial-Value>0.001</Initial-Value>
                <End-Value>0.00001</End-Value>
                <Evaluation-Value>0.0</Evaluation-Value>
              </Linear-Schedule>
            </Alpha>
          </CACLA>
        </Outputs>
      </VFA-Learner>
    </Actor>
    <Critic>
      <VFA-Critic>
        <TD-Lambda>
          <Linear-VFA>
            <RBF-Grid>
              <RBF-Grid-Dimension>
                <Variable>omega_r</Variable>
                <Num-Features>80</Num-Features>
                <Distribution>cubic</Distribution>
              </RBF-Grid-Dimension>
              <RBF-Grid-Dimension>
                <Variable>d_omega_r</Variable>
                <Num-Features>80</Num-Features>
                <Distribution>cubic</Distribution>
              </RBF-Grid-Dimension>
              <RBF-Grid-Dimension>
                <Variable>T_g</Variable>
                <Num-Features>80</Num-Features>
                <Distribution>linear</Distribution>
              </RBF-Grid-Dimension>
              <RBF-Grid-Dimension>
                <Variable>E_p</Variable>
                <Num-Features>80</Num-Features>
                <Distribution>cubic</Distribution>
              </RBF-Grid-Dimension>
            </RBF-Grid>
          </Linear-VFA>
          <E-Traces>
            <Replace>true</Replace>
            <Lambda>0.9</Lambda>
            <Threshold>0.0001</Threshold>
          </E-Traces>
          <Gamma>0.9</Gamma>
          <Alpha>
            <Linear-Schedule>
              <Interpolation>linear</Interpolation>
              <Initial-Value>0.01</Initial-Value>
              <End-Value>0.001</End-Value>
              <Evaluation-Value>0.0</Evaluation-Value>
            </Linear-Schedule>
          </Alpha>
        </TD-Lambda>
      </VFA-Critic>
    </Critic>
  </SimGod>
</RLSimion>