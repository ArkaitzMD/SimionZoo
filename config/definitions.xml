<?xml version="1.0" encoding="utf-8"?>
<DEFINITIONS>
    <!--World-->
  <CLASS Name="WORLD">
    <INTEGER-VALUE Name="NUM_SIMULATION_STEPS" Default="4"/>
    <DECIMAL-VALUE Name="DELTA_T" Default="0.01"/>
    <CHOICE Name="Dynamic-Model" LoadXML="WORLD-DEFINITION">
      <CHOICE-ELEMENT Name="Wind-turbine" XML="../config/world-wind-turbine.xml" Class="Wind-turbine-parameters"/>
      <CHOICE-ELEMENT Name="Underwater-vehicle" XML="../config/world-underwater-vehicle.xml" Class="Underwater-vehicle-parameters"/>
      <CHOICE-ELEMENT Name="PItch-control" XML="../config/world-pitch-control.xml" Class="Pitch-control-parameters"/>
    </CHOICE>
    <BRANCH Name="Reward" Class="REWARD"/>
  </CLASS>

  <!-- World parameters -->
  <CLASS Name="Wind-turbine-parameters">
    <FILE-PATH-VALUE Name="EVALUATION_WIND_DATA" Default="../config/wind-turbine/setpoints/TurbSim-10.25.hh"/>
    <FILE-PATH-VALUE Name="POWER_SET_POINT" Default="../config/wind-turbine/setpoints/windturbine-power-setpoint.txt"/>
    <MULTI-VALUED Name="FILE" Class="FILE-PATH-VALUE"/>
  </CLASS>
  <CLASS Name="Underwater-vehicle-parameters">
    <FILE-PATH-VALUE Name="SET_POINT_FILE"/>
  </CLASS>
  <CLASS Name="Pitch-control-parameters">
    <FILE-PATH-VALUE Name="SET_POINT_FILE"/>
  </CLASS>
  
  <CLASS Name="LOG">
    <DECIMAL-VALUE Name="Freq" Default="0.25" Comment="log freq. in seconds"/>
    <STRING-VALUE Name="Prefix" Default="prefix" Comment="Prefix given to the names of the generated log files"/>
    <STRING-VALUE Name="Ouput-directory" Default="test-dir" Comment="name of the directory within ../logs/ where log files will be saved "/>
    <ENUM-VALUE Class="BOOLEAN" Name="Log-eval-episodes" Default="true" Comment="Log evaluation episodes?"/>
    <ENUM-VALUE Class="BOOLEAN" Name="Log-training-episodes" Default="false" Comment="Log training episodes?"/>
    <ENUM-VALUE Class="BOOLEAN" Name="Log-eval-avg-rewards" Default="true" Comment="Log average rewards in evaluation episodes?"/>
  </CLASS>
  
  <!--Experiment-->
  <CLASS Name="EXPERIMENT">
    <INTEGER-VALUE Name="Num-Episodes" Default="1000" Comment="Number of episodes"/>
    <INTEGER-VALUE Name="Episode-Length" Default="360" Comment="Length in seconds"/>
    <INTEGER-VALUE Name="Random-Seed" Default="1" Comment="Seed used to generate random numbers"/>
    <INTEGER-VALUE Name="Eval-Freq" Default="10" Comment="Evaluation freq. in episodes"/>
    <BRANCH Name="Log" Class="LOG"/>
  </CLASS>
  
  <!--SIMGOD-->
  <CLASS Name="SIMGOD">
    <CHOICE Name="Configuration">
      <CHOICE-ELEMENT Name="Actor" Class="ACTOR-CONFIG"/>
      
      <CHOICE-ELEMENT Name="Actor-Critic" Class="ACTOR-CRITIC-CONFIG"/>

      <CHOICE-ELEMENT Name="Actor-Critic-Controller" Class="ACTOR-CRITIC-CONTROLLER-CONFIG"/>
    </CHOICE>
  </CLASS>

  <CLASS Name="ACTOR-CONFIG">
    <BRANCH Name="Actor" Class="ACTOR"/>
  </CLASS>
  
  <CLASS Name="ACTOR-CRITIC-CONFIG">
    <BRANCH Name="Actor" Class="ACTOR"/>
    <BRANCH Name="Critic" Class="CRITIC"/>
  </CLASS>

  <CLASS Name="ACTOR-CRITIC-CONTROLLER-CONFIG">
    <BRANCH Name="Controller" Class="ACTOR"/>
    <BRANCH Name="Actor" Class="ACTOR"/>
    <BRANCH Name="Critic" Class="CRITIC"/>
  </CLASS>
  
  <!-- Generic actors and critics-->
  <CLASS Name="ACTOR">
    <CHOICE Name="Type">
      <CHOICE-ELEMENT Name="VFA-Learner" Class="VFA-Learner"/>
      <CHOICE-ELEMENT Name="Multi-Controller" Class="MULTI-CONTROLLER"/>
    </CHOICE>
  </CLASS>
  

  <CLASS Name="VFA-Learner">
    <FILE-PATH-VALUE Name="Load" Optional="true"/>
    <FILE-PATH-VALUE Name="Save" Optional="true"/>
    <MULTI-VALUED Name="Outputs" Class="Single-Output-VFA-Policy-Learner"/>
  </CLASS>

  <CLASS Name="Single-Output-VFA-Policy-Learner">
    <CHOICE Name="Algorithm">
      <CHOICE-ELEMENT Name="CACLA" Class="CACLA"/>
      <CHOICE-ELEMENT Name="RegularGradient" Class="RegularGradient"/>
      <CHOICE-ELEMENT Name="Incremental-Natural-Actor" Class="Incremental-Natural-Actor"/>
    </CHOICE>
   </CLASS>

  <CLASS Name="CACLA">
    <BRANCH Name="Alpha" Class="NUMERIC-VALUE" Comment="Gain used to update the policy"/>
    <BRANCH Name ="VFA-Policy" Class="VFA-Policy"/>
    <BRANCH Name="E-Traces" Class="ETRACES" Optional="true"/>
  </CLASS>

  <CLASS Name="Regular-Gradient">
    <BRANCH Name="Alpha" Class="NUMERIC-VALUE" Comment="Gain used to update the policy"/>
    <BRANCH Name ="VFA-Policy" Class="VFA-Policy"/>
    <BRANCH Name="E-Traces" Class="ETRACES" Optional="true"/>
  </CLASS>

  <CLASS Name="Incremental-Natural-Actor">
    <DECIMAL-VALUE Name="Gamma" Comment="Gamma parameter used by the critic"/>
    <BRANCH Name="Alpha-v" Class="NUMERIC-VALUE" Comment="Gain used by the critic to update the value"/>
    <BRANCH Name="Alpha-u" Class="NUMERIC-VALUE" Comment="Gain used to update the policy"/>
    <BRANCH Name ="VFA-Policy" Class="VFA-Policy"/>
    <BRANCH Name="E-Traces" Class="ETRACES" Optional="true"/>
  </CLASS>

  <CLASS Name="VFA-Policy">
    <XML-NODE-REF Name="Output-Action" XMLFile="WORLD-DEFINITION" HangingFrom="Action"/>
    <BRANCH Name="Linear-VFA" Class="Linear-VFA"/>
    <BRANCH Name="Exploration" Class="GAUSSIAN-NOISE"/>
  </CLASS>

  <CLASS Name="MULTI-OUTPUT-VFA">
    <MULTI-VALUED Name="Single-Output-VFA" Class="SINGLE-OUTPUT-VFA"/>
  </CLASS>

  <CLASS Name="SINGLE-OUTPUT-VFA">
    <XML-NODE-REF Name="Output-Action" XMLFile="WORLD-DEFINITION" HangingFrom="Action"/>
    <BRANCH Name="Linear-VFA" Class="Linear-VFA"/>
  </CLASS>

  <CLASS Name="MULTI-CONTROLLER">
    <MULTI-VALUED Name="Controller" Class="CONTROLLER"/>
  </CLASS>
  
  <CLASS Name="CONTROLLER">
    <CHOICE Name="Algorithm">
      <CHOICE-ELEMENT Name="PID" Class="PID"/>
      <CHOICE-ELEMENT Name="LQR" Class="LQR"/>
      <CHOICE-ELEMENT Name="Jonkman" Class="Jonkman"/>
      <CHOICE-ELEMENT Name="Vidal" Class="Vidal"/>
      <CHOICE-ELEMENT Name="Boukhezzar" Class="Boukhezzar"/>
    </CHOICE>
  </CLASS>

  <CLASS Name="PID">
    <XML-NODE-REF Name="Output-Action" XMLFile="WORLD-DEFINITION" HangingFrom="Action"/>
    <XML-NODE-REF Name="Input-Variable" XMLFile="WORLD-DEFINITION" HangingFrom="State"/>
    <DECIMAL-VALUE Name="KP"/>
    <DECIMAL-VALUE Name="KI"/>
    <DECIMAL-VALUE Name="KD"/>
  </CLASS>

  <CLASS Name="LQR">
    <XML-NODE-REF Name="Output-Action" XMLFile="WORLD-DEFINITION" HangingFrom="Action"/>
    <MULTI-VALUED Name="Gains" Class="LQR-GAIN"/>
  </CLASS>

  <CLASS Name="Jonkman">
    <DECIMAL-VALUE Name="VS_RtGnSp" Default="12.6805"/>
    <DECIMAL-VALUE Name="VS_SlPc" Default="10.0"/>
    <DECIMAL-VALUE Name="VS_Rgn2K" Default="2.332287"/>
    <DECIMAL-VALUE Name="VS_Rgn2Sp" Default="91.21091"/>
    <DECIMAL-VALUE Name="VS_CtInSp" Default="70.16224"/>
    <DECIMAL-VALUE Name="VS_RtPwr" Default="5296610.0"/>
    <DECIMAL-VALUE Name="VS_Rgn3MP" Default="0.01745329"/>
    <DECIMAL-VALUE Name="PC_KI"/>
    <DECIMAL-VALUE Name="PC_KK"/>
    <DECIMAL-VALUE Name="PC_KP"/>
    <DECIMAL-VALUE Name="PC_RefSpd" Default="122.9096"/>
  </CLASS>

  <CLASS Name="Vidal">
    <DECIMAL-VALUE Name="A"/>
    <DECIMAL-VALUE Name="K_alpha"/>
    <DECIMAL-VALUE Name="KP"/>
    <DECIMAL-VALUE Name="KI"/>
    <DECIMAL-VALUE Name="P_s"/>
  </CLASS>

  <CLASS Name="Boukhezzar">
    <DECIMAL-VALUE Name="C_0"/>
    <DECIMAL-VALUE Name="KP"/>
    <DECIMAL-VALUE Name="KI"/>
    <DECIMAL-VALUE Name="K_t"/>
    <DECIMAL-VALUE Name="J_t"/>
  </CLASS>

  <CLASS Name="CRITIC">
    <BRANCH Name="Type" Class="VFA-Critic"/>
  </CLASS>

  <CLASS Name="VFA-Critic">
    <CHOICE Name="Algorithm">
      <CHOICE-ELEMENT Name="TD-Lambda" Class="TD-Lambda"/>
      <CHOICE-ELEMENT Name="True-Online-TD-Lambda" Class="TD-Lambda"/>
      <CHOICE-ELEMENT Name="TDC-Lambda" Class="TDC-Lambda"/>
    </CHOICE>
  </CLASS>
  
  <CLASS Name="TD-Lambda">
    <DECIMAL-VALUE Name="Gamma"/>
    <FILE-PATH-VALUE Name="Load" Optional="true"/>
    <FILE-PATH-VALUE Name="Save" Optional="true"/>
    <BRANCH Name="Alpha" Class="NUMERIC-VALUE"/>
    <BRANCH Name="E-Traces" Class="ETRACES" Optional="true"/>
    <BRANCH Name="Linear-VFA" Class="Linear-VFA"/>
  </CLASS>

  <CLASS Name="True-Online-TD-Lambda">
    <DECIMAL-VALUE Name="Gamma"/>
    <FILE-PATH-VALUE Name="Load" Optional="true"/>
    <FILE-PATH-VALUE Name="Save" Optional="true"/>
    <BRANCH Name="Alpha" Class="NUMERIC-VALUE"/>
    <BRANCH Name="E-Traces" Class="ETRACES" Optional="true"/>
    <BRANCH Name="Linear-VFA" Class="Linear-VFA"/>
  </CLASS>
  
  <CLASS Name="TDC-Lambda">
    <DECIMAL-VALUE Name="Gamma"/>
    <FILE-PATH-VALUE Name="Load" Optional="true"/>
    <FILE-PATH-VALUE Name="Save" Optional="true"/>
    <BRANCH Name="Alpha" Class="NUMERIC-VALUE"/>
    <BRANCH Name="Beta" Class="NUMERIC-VALUE"/>
    <BRANCH Name="E-Traces" Class="ETRACES"  Optional="true"/>
    <BRANCH Name="Linear-VFA" Class="Linear-VFA"/>
  </CLASS>
  

  
  <CLASS Name="LQR-GAIN">
    <XML-NODE-REF Name="Variable" XMLFile="WORLD-DEFINITION" HangingFrom="State"/>
    <DECIMAL-VALUE Name="Gain"/>
  </CLASS>
  
  <CLASS Name="ETRACES">
    <DECIMAL-VALUE Name="Lambda" Default="0.9"/>
    <DECIMAL-VALUE Name="Threshold" Default="0.001"/>
    <ENUM-VALUE Name="Replace" Class="BOOLEAN"/>
  </CLASS>

  <CLASS Name="Linear-VFA">
    <CHOICE Name="Approximator">
      <CHOICE-ELEMENT Name="RBF-Grid" Class="RBF-GRID"/>
    </CHOICE>
  </CLASS>
  
  <CLASS Name="RBF-GRID">
    <MULTI-VALUED Name="RBF-Grid-Dimension" Class="RBF-GRID-DIMENSION"/>
  </CLASS>

  <!-- RBFs-->
  
  <CLASS Name="RBF-GRID-DIMENSION">
    <XML-NODE-REF Name="Variable" XMLFile="WORLD-DEFINITION" HangingFrom="State"/>
    <INTEGER-VALUE Name="Num-Features" Optional="false" Default="10"/>
    <INTEGER-VALUE Name="Min" Optional="true"/>
    <INTEGER-VALUE Name="Max" Optional="true"/>
    <ENUM-VALUE Name="Distribution" Class="DISTRIBUTIONS"/>
  </CLASS>
  
  <CLASS Name="GAUSSIAN-NOISE">
    <BRANCH Name="Sigma" Class="NUMERIC-VALUE"/>
    <BRANCH Name="Alpha" Class="NUMERIC-VALUE"/>
    <BRANCH Name="Scale" Class="NUMERIC-VALUE"/>
  </CLASS>

  <CLASS Name="NUMERIC-VALUE">
    <CHOICE Name="Type">
      <CHOICE-ELEMENT Name="Constant" Class="CONSTANT"/>
      <CHOICE-ELEMENT Name="Linear-Schedule" Class="SCHEDULE"/>
      <!--<CHOICE-ELEMENT Name="Point-Interpolation" CLASS="POINT-INTERPOLATION"/>-->
    </CHOICE>
  </CLASS>

  <CLASS Name="CONSTANT">
    <DECIMAL-VALUE Name="Value" Default="0.0"/>
  </CLASS>

  <CLASS Name="SCHEDULED-DOUBLE">
    <DECIMAL-VALUE Name="Start-Offset" Default="0.0"/>
    <DECIMAL-VALUE Name="Initial-Value" Default="0.0"/>
    <DECIMAL-VALUE Name="End-Value" Default="1.0"/>
    <DECIMAL-VALUE Name="Evaluation-Value" Default="0.0"/>
    <ENUM-VALUE Name="Interpolation" Class="INTERPOLATION"/>
  </CLASS>
  
  
  <!--REWARDS-->

  <CLASS Name="REWARD">
    <DECIMAL-VALUE Name="Min" Comment="Minimum allowed reward"/>
    <DECIMAL-VALUE Name="Max" Comment="Maximum output of each reward component"/>
    <MULTI-VALUED Name="Reward-components" Class="REWARD-COMPONENT"/>
  </CLASS>

  <CLASS Name="REWARD-COMPONENT">
    <CHOICE Name="Type">
      <CHOICE-ELEMENT Name="Deviation-component" Class="DEVIATION-REWARD-COMPONENT"/>
    </CHOICE> 
  </CLASS>

  <CLASS Name="DEVIATION-REWARD-COMPONENT">
    <XML-NODE-REF Name="Variable" XMLFile="WORLD-DEFINITION" HangingFrom="State"/>
    <DECIMAL-VALUE Name="Weight" Default="1.0"/>
    <DECIMAL-VALUE Name="Tolerance" Default="10"/>
  </CLASS>

  <ENUMERATED-TYPES>
    <ENUMERATION Name="DISTRIBUTIONS">
      <VALUE>linear</VALUE>
      <VALUE>quadratic</VALUE>
      <VALUE>cubic</VALUE>
    </ENUMERATION>

    <ENUMERATION Name="INTERPOLATION">
      <VALUE>linear</VALUE>
      <VALUE>quadratic</VALUE>
      <VALUE>cubic</VALUE>
    </ENUMERATION>
    
    <ENUMERATION Name="BOOLEAN">
      <VALUE>true</VALUE>
      <VALUE>false</VALUE>
    </ENUMERATION>

    <ENUMERATION Name="TIME-REFERENCE">
      <VALUE>episode</VALUE>
      <VALUE>experiment</VALUE>
      <VALUE>time</VALUE>
    </ENUMERATION>
  </ENUMERATED-TYPES>
</DEFINITIONS>
