<?xml version="1.0"?>
<DEFINITIONS>
  <CLASS Name="CCACLALearner">
    <BRANCH Name="E-Traces" Class="CETraces" Comment="Eligibility traces used by CACLA" Optional="true"/>
    <BRANCH Name="Alpha" Class="CNumericValue-Factory" Comment="Learning gain [0..1]"/>
    <BRANCH Name="Policy" Class="CDeterministicPolicy-Factory" Comment="The policy to be learned" Optional="false"/>
  </CLASS>

  <CLASS Name="CActorCritic">
    <BRANCH Name="Actor" Class="CActor" Comment="The actor" Optional="false"/>
    <BRANCH Name="Critic" Class="CCritic-Factory" Comment="The critic" Optional=" false"/>
  </CLASS>

  <CLASS Name="CRegularPolicyGradientLearner">
    <BRANCH Name="E-Traces" Class="CETraces" Comment="Eligibility traces used by the regular Pol.Grad. learner" Optional="true"/>
    <BRANCH Name="Alpha" Class="CNumericValue-Factory" Comment="The learning gain"/>
    <BRANCH Name="Policy" Class="CDeterministicPolicy-Factory" Comment="The policy to be learned" Optional="false"/>
  </CLASS>

  <CLASS Name="CActor">
    <MULTI-VALUED Name="Output" Class="CPolicyLearner-Factory" Comment="The outputs of the actor. One for each output dimension"/>
  </CLASS>

  <CLASS Name="CController-Factory">
    <CHOICE Name="Controller" Comment="The specific controller to be used">
      <CHOICE-ELEMENT Name="Vidal" Class="CWindTurbineVidalController" Comment="The Vidal wind-turbine controller. Outputs: d_T_g and d_beta"/>
      <CHOICE-ELEMENT Name="Boukhezzar" Class="CWindTurbineBoukhezzarController" Comment="The Boukhezzar wind-turbine controller. Outputs: d_T_g and d_beta"/>
      <CHOICE-ELEMENT Name="PID" Class="CPIDController" Comment="A PID controller"/>
      <CHOICE-ELEMENT Name="LQR" Class="CLQRController" Comment="An LQR controller"/>
    </CHOICE>
  </CLASS>

  <CLASS Name="CLQRGain">
    <XML-NODE-REF Name="Variable" XMLFile="WORLD-DEFINITION" HangingFrom="State"/>
    <DOUBLE-VALUE Name="Gain" Default="0.0" Comment="The gain applied to the input state variable"/>
  </CLASS>

  <CLASS Name="CLQRController">
    <XML-NODE-REF Name="Output-Action" XMLFile="WORLD-DEFINITION" HangingFrom="Action"/>
    <MULTI-VALUED Name="LQR-Gain" Class="CLQRGain" Comment="An LQR gain on an input state variable"/>
  </CLASS>

  <CLASS Name="CPIDController">
    <XML-NODE-REF Name="Output-Action" XMLFile="WORLD-DEFINITION" HangingFrom="Action"/>
    <XML-NODE-REF Name="Input-Variable" XMLFile="WORLD-DEFINITION" HangingFrom="State"/>
    <BRANCH Name="KP" Class="CNumericValue-Factory" Comment="Proportional gain"/>
    <BRANCH Name="KI" Class="CNumericValue-Factory" Comment="Integral gain"/>
    <BRANCH Name="KD" Class="CNumericValue-Factory" Comment="Derivative gain"/>
  </CLASS>

  <CLASS Name="CWindTurbineVidalController">
    <BRANCH Name="A" Class="CNumericValue-Factory" Comment="A parameter of the torque controller"/>
    <BRANCH Name="K_alpha" Class="CNumericValue-Factory" Comment="K_alpha parameter of the torque controller"/>
    <BRANCH Name="KP" Class="CNumericValue-Factory" Comment="Proportional gain of the pitch controller"/>
    <BRANCH Name="KI" Class="CNumericValue-Factory" Comment="Integral gain of the pitch controller"/>
    <BRANCH Name="P_s" Class="CNumericValue-Factory" Comment="Power setpoint for the torque controller"/>
  </CLASS>

  <CLASS Name="CWindTurbineBoukhezzarController">
    <DOUBLE-VALUE Name="J_t" Default="0.0" Comment="Wind turbine model's J_t parameter (kg*m^2)"/>
    <DOUBLE-VALUE Name="K_t" Default="0.0" Comment="Wind turbine model's K_t parameter"/>
    <BRANCH Name="C_0" Class="CNumericValue-Factory" Comment="C_0 parameter"/>
    <BRANCH Name="KP" Class="CNumericValue-Factory" Comment="Proportional gain of the pitch controller"/>
    <BRANCH Name="KI" Class="CNumericValue-Factory" Comment="Integral gain of the pitch controller"/>
  </CLASS>

  <CLASS Name="CWindTurbineJonkmanController">
    <DOUBLE-VALUE Name="CornerFreq" Default="0.0" Comment="Corner Freq. parameter"/>
    <DOUBLE-VALUE Name="VSRtGnSp" Default="0.0" Comment="Rated Generator Speed"/>
    <DOUBLE-VALUE Name="VS_SlPc" Default="0.0" Comment="SIPc parameter"/>
    <DOUBLE-VALUE Name="VS_Rgn2K" Default="0.0" Comment="Rgn2K parameter"/>
    <DOUBLE-VALUE Name="VS_Rgn2Sp" Default="0.0" Comment="Rgn2Sp parameter"/>
    <DOUBLE-VALUE Name="VS_CtInSp" Default="0.0" Comment="CtlnSp parameter"/>
    <DOUBLE-VALUE Name="VS_RtPwr" Default="0.0" Comment="Rated power"/>
    <DOUBLE-VALUE Name="VS_Rgn3MP" Default="0.0" Comment="Rgn3MP parameter"/>
    <DOUBLE-VALUE Name="PC_RefSpd" Default="0.0" Comment="Pitch control reference speed"/>
    <BRANCH Name="PC_KK" Class="CNumericValue-Factory" Comment="PC_KK"/>
    <BRANCH Name="PC_KP" Class="CNumericValue-Factory" Comment="PC_KP"/>
    <BRANCH Name="PC_KI" Class="CNumericValue-Factory" Comment="PC_KI"/>
  </CLASS>

  <CLASS Name="CTDLambdaCritic">
    <BRANCH Name="E-Traces" Class="CETraces" Comment="Eligibility traces of the critic" Optional="true"/>
    <BRANCH Name="Alpha" Class="CNumericValue-Factory" Comment="Learning gain"/>
    <BRANCH Name="Gamma" Class="CNumericValue-Factory" Comment="Gamma parameter"/>
    <BRANCH Name="V-Function" Class="CLinearStateVFA-Factory" Comment="The parameterization of the V-Function to be learned" Optional="false"/>
  </CLASS>

  <CLASS Name="CTDCLambdaCritic">
    <BRANCH Name="E-Traces" Class="CETraces" Comment="Elilgibility traces of the critic" Optional="true"/>
    <BRANCH Name="Alpha" Class="CNumericValue-Factory" Comment="Learning gain of the critic"/>
    <BRANCH Name="Beta" Class="CNumericValue-Factory" Comment="Learning gain applied to the omega vector"/>
    <BRANCH Name="Gamma" Class="CNumericValue-Factory" Comment="Gamma parameter"/>
  </CLASS>

  <CLASS Name="CTrueOnlineTDLambdaCritic">
    <BRANCH Name="E-Traces" Class="CETraces" Comment="Eligibility traces of the critic" Optional="true"/>
    <BRANCH Name="Alpha" Class="CNumericValue-Factory" Comment="Learning gain of the critic"/>
    <BRANCH Name="Gamma" Class="CNumericValue-Factory" Comment="Gamma parameter"/>
    <BRANCH Name="V-Function" Class="CLinearStateVFA-Factory" Comment="The parameterization of the V-Function to be learned" Optional="false"/>
  </CLASS>

  <CLASS Name="CCritic">
    <BRANCH Name="V-Function" Class="CLinearStateVFA-Factory" Comment="The parameterization of the V-Function to be learned" Optional="false"/>
  </CLASS>

  <CLASS Name="CCritic-Factory">
    <CHOICE Name="Critic" Comment="Critic type">
      <CHOICE-ELEMENT Name="TD-Lambda" Class="CTDLambdaCritic" Comment="TD-Lambda algorithm"/>
      <CHOICE-ELEMENT Name="True-Online-TD-Lambda" Class="CTrueOnlineTDLambdaCritic" Comment="True-online TD-Lambda algorithm"/>
      <CHOICE-ELEMENT Name="TDC-Lambda" Class="CTDCLambdaCritic" Comment="TDC-Lambda algorithm"/>
    </CHOICE>
  </CLASS>

  <CLASS Name="CETraces">
    <DOUBLE-VALUE Name="Threshold" Default="0.001" Comment="Threshold applied to trace factors"/>
    <DOUBLE-VALUE Name="Lambda" Default="0.9" Comment="Lambda parameter"/>
    <ENUM-VALUE Name="Replace" Class="Boolean" Default="True" Comment="Replace existing traces? Or add?"/>
  </CLASS>

  <CLASS Name="CExperiment">
    <DOUBLE-VALUE Name="Progress-Update-Freq" Default="0.5" Comment="Progress update frequency (seconds)"/>
    <INTEGER-VALUE Name="Random-Seed" Default="1" Comment="Random seed used to generate random sequences of numbers"/>
    <INTEGER-VALUE Name="Num-Episodes" Default="1" Comment="Number of episodes"/>
    <INTEGER-VALUE Name="Eval-Freq" Default="0" Comment="Evaluation frequency (in episodes)"/>
    <DOUBLE-VALUE Name="Episode-Length" Default="1.0" Comment="Length of an episode (seconds)"/>
  </CLASS>

  <CLASS Name="CGaussianRBFStateGridFeatureMap" Window="New">
    <MULTI-VALUED Name="RBF-Grid-Dimension" Class="CStateVariableGrid" Comment="Parameters of the state-dimension's grid"/>
  </CLASS>

  <CLASS Name="CGaussianRBFActionGridFeatureMap">
    <MULTI-VALUED Name="RBF-Grid-Dimension" Class="CActionVariableGrid" Comment="Parameters of the action-dimension's grid"/>
  </CLASS>

  <CLASS Name="CFeatureMap-Factory">
    <CHOICE Name="Type" Comment="Feature map type">
      <CHOICE-ELEMENT Name="RBF-State-Grid" Class="CGaussianRBFStateGridFeatureMap" Comment="Grid on the state-space"/>
      <CHOICE-ELEMENT Name="RBF-Action-Grid" Class="CGaussianRBFActionGridFeatureMap" Comment="Grid on the action-space"/>
    </CHOICE>
  </CLASS>

  <ENUMERATION Name="Boolean">
    <VALUE>False</VALUE>
    <VALUE>True</VALUE>
  </ENUMERATION>
  <ENUMERATION Name="Distribution">
    <VALUE>linear</VALUE>
    <VALUE>quadratic</VALUE>
    <VALUE>cubic</VALUE>
  </ENUMERATION>
  <ENUMERATION Name="Interpolation">
    <VALUE>linear</VALUE>
    <VALUE>quadratic</VALUE>
    <VALUE>cubic</VALUE>
  </ENUMERATION>
  <ENUMERATION Name="TimeReference">
    <VALUE>episode</VALUE>
    <VALUE>experiment</VALUE>
    <VALUE>experimentTime</VALUE>
  </ENUMERATION>
  <CLASS Name="CLogger">
    <DIR-PATH-VALUE Name="Output-Directory" Default="../logs" Comment="Directory where the output log files will be saved"/>
    <STRING-VALUE Name="Prefix" Default="" Comment="Prefix given to the output log files"/>
    <DOUBLE-VALUE Name="Log-Freq" Default="0.25" Comment="Log frequency. Simulation time in seconds."/>
    <ENUM-VALUE Name="Log-eval-episodes" Class="Boolean" Default="False" Comment="Log evaluation episodes?"/>
    <ENUM-VALUE Name="Log-training-episodes" Class="Boolean" Default="False" Comment="Log training episodes?"/>
    <ENUM-VALUE Name="Log-eval-experiment" Class="Boolean" Default="True" Comment="Log the stats of the evaluation episodes?"/>
    <ENUM-VALUE Name="Log-training-experiment" Class="Boolean" Default="False" Comment="Log the stats of the training episodes?"/>
  </CLASS>

  <CLASS Name="CNoise-Factory">
    <CHOICE Name="Noise" Comment="Noise type">
      <CHOICE-ELEMENT Name="GaussianNoise" Class="CGaussianNoise" Comment="Gaussian noise"/>
    </CHOICE>
  </CLASS>

  <CLASS Name="CGaussianNoise">
    <BRANCH Name="Sigma" Class="CNumericValue-Factory" Comment="Width of the gaussian bell"/>
    <BRANCH Name="Alpha" Class="CNumericValue-Factory" Comment="Low-pass first-order filter's gain [0...1]. 1=no filter"/>
    <BRANCH Name="Scale" Class="CNumericValue-Factory" Comment="Scale factor applied to the noise signal before adding it to the policy's output"/>
  </CLASS>

  <CLASS Name="CConstantValue">
    <DOUBLE-VALUE Name="Value" Default="0.0" Comment="Constant value"/>
  </CLASS>

  <CLASS Name="CInterpolatedValue">
    <DOUBLE-VALUE Name="Start-Offset" Default="0.0" Comment="Normalized time from which the schedule will begin [0...1]"/>
    <DOUBLE-VALUE Name="Pre-Offset-Value" Default="0.0" Comment="Output value before the schedule begins"/>
    <DOUBLE-VALUE Name="Initial-Value" Default="0.0" Comment="Output value at the beginning of the schedule"/>
    <DOUBLE-VALUE Name="End-Value" Default="1.0" Comment="Output value at the end of the schedule"/>
    <DOUBLE-VALUE Name="Evaluation-Value" Default="0.0" Comment="Output value during evaluation episodes"/>
    <ENUM-VALUE Name="Interpolation" Class="Interpolation" Default="linear" Comment="Interpolation type"/>
    <ENUM-VALUE Name="Time-reference" Class="TimeReference" Default="experiment" Comment="Time reference"/>
  </CLASS>

  <CLASS Name="CBhatnagarSchedule">
    <DOUBLE-VALUE Name="Alpha-0" Default="1.0" Comment="Alpha-0 parameter in Bhatnagar's schedule"/>
    <DOUBLE-VALUE Name="Alpha-c" Default="1.0" Comment="Alpha-c parameter in Bhatnagar's schedule"/>
    <DOUBLE-VALUE Name="Time-Exponent" Default="1.0" Comment="Time exponent in Bhatnagar's schedule"/>
    <DOUBLE-VALUE Name="Evaluation-Value" Default="0.0" Comment="Output value during evaluation episodes"/>
    <ENUM-VALUE Name="Time-reference" Class="TimeReference" Default="linear" Comment="Time reference"/>
  </CLASS>

  <CLASS Name="CNumericValue-Factory" Window="New">
    <CHOICE Name="Schedule" Comment="Schedule-type">
      <CHOICE-ELEMENT Name="Constant" Class="CConstantValue" Comment="Constant value"/>
      <CHOICE-ELEMENT Name="Linear-Schedule" Class="CInterpolatedValue" Comment="Linear schedule"/>
      <CHOICE-ELEMENT Name="Bhatnagar-Schedule" Class="CBhatnagarSchedule" Comment="Bhatnagar's schedule"/>
    </CHOICE>
  </CLASS>

  <CLASS Name="CPolicyLearner">
    <BRANCH Name="Policy" Class="CDeterministicPolicy-Factory" Comment="The policy to be learned" Optional="false"/>
  </CLASS>

  <CLASS Name="CPolicyLearner-Factory">
    <CHOICE Name="Policy-Learner" Comment="The algorith used to learn the policy">
      <CHOICE-ELEMENT Name="CACLA" Class="CCACLALearner" Comment="CACLA algorithm"/>
      <CHOICE-ELEMENT Name="Regular-Gradient" Class="CRegularPolicyGradientLearner" Comment="A regular policy-gradient learning algorithm"/>
    </CHOICE>
  </CLASS>

  <CLASS Name="CRewardFunctionComponent">
    <XML-NODE-REF Name="Variable" XMLFile="WORLD-DEFINITION" HangingFrom="State"/>
    <BRANCH Name="Tolerance" Class="CNumericValue-Factory" Comment="Tolerance value: errors greater will result in a negative reward"/>
    <BRANCH Name="Weight" Class="CNumericValue-Factory" Comment="Weight of this reward function component (in case more than one is used)"/>
  </CLASS>

  <CLASS Name="CRewardFunction" Window="New">
    <DOUBLE-VALUE Name="Min" Default="-100.0" Comment="Minimum output of the reward function"/>
    <DOUBLE-VALUE Name="Max" Default="1.0" Comment="Maximum output of the reward function"/>
    <MULTI-VALUED Name="Reward-Component" Class="CRewardFunctionComponent" Comment="A component of the reward function"/>
  </CLASS>

  <CLASS Name="CSimGod">
    <MULTI-VALUED Name="Simion" Class="CSimion-Factory" Comment="Simions: agents and controllers"/>
  </CLASS>

  <CLASS Name="CSimion-Factory">
    <CHOICE Name="Type" Comment="The Simion class">
      <CHOICE-ELEMENT Name="Controller" Class="CController-Factory" Comment="A controller"/>
      <CHOICE-ELEMENT Name="Actor-Critic" Class="CActorCritic" Comment="An Actor-Critic agent"/>
    </CHOICE>
  </CLASS>

  <CLASS Name="CStateVariableGrid">
    <XML-NODE-REF Name="Variable" XMLFile="WORLD-DEFINITION" HangingFrom="State"/>
    <INTEGER-VALUE Name="Num-Features" Default="3" Comment="The number of points that form the grid"/>
    <STRING-VALUE Name="Distribution" Default="linear" Comment="The manner in which the points are distributed on the state variable's grid"/>
  </CLASS>

  <CLASS Name="CActionVariableGrid">
    <XML-NODE-REF Name="Variable" XMLFile="WORLD-DEFINITION" HangingFrom="Action"/>
    <INTEGER-VALUE Name="Num-Features" Default="3" Comment="The number of points that form the grid"/>
    <STRING-VALUE Name="Distribution" Default="linear" Comment="The manner in which the points are distributed on the action variable's grid"/>
  </CLASS>

  <CLASS Name="CDirFileOutput">
    <DIR-PATH-VALUE Name="Output-Dir" Default="../data" Comment="The output directory"/>
    <STRING-VALUE Name="File-Prefix" Default="" Comment="The prefix given to all the output files"/>
  </CLASS>

  <CLASS Name="CDeterministicPolicy-Factory">
    <CHOICE Name="Policy" Comment="The policy type">
      <CHOICE-ELEMENT Name="Deterministic-Policy-Gaussian-Noise" Class="CDeterministicPolicyGaussianNoise" Comment="A deterministic policy pi(s) to which some noise is added"/>
      <CHOICE-ELEMENT Name="Stochastic-Policy-Gaussian-Noise" Class="CStochasticPolicyGaussianNoise" Comment="An stochastic policy pi(s)= N(pi_mean(s),pi_variance(s))"/>
    </CHOICE>
  </CLASS>

  <CLASS Name="CDeterministicPolicy">
    <XML-NODE-REF Name="Output-Action" XMLFile="WORLD-DEFINITION" HangingFrom="Action"/>
    <BRANCH Name="Linear-State-VFA" Class="CLinearStateVFA-Factory" Comment="The parameterized VFA that approximates the function" Optional=" false"/>
  </CLASS>

  <CLASS Name="CDeterministicPolicyGaussianNoise">
    <BRANCH Name="Exploration-Noise" Class="CNoise-Factory" Comment="Parameters of the noise used as exploration" Optional="false"/>
    <XML-NODE-REF Name="Output-Action" XMLFile="WORLD-DEFINITION" HangingFrom="Action"/>
    <BRANCH Name="Linear-State-VFA" Class="CLinearStateVFA-Factory" Comment="The parameterized VFA that approximates the function" Optional=" false"/>
  </CLASS>

  <CLASS Name="CStochasticPolicyGaussianNoise">
    <BRANCH Name="Sigma-VFA" Class="CLinearStateVFA-Factory" Comment="The parameterized VFA that approximates variance(s)" Optional=" false"/>
    <XML-NODE-REF Name="Output-Action" XMLFile="WORLD-DEFINITION" HangingFrom="Action"/>
    <BRANCH Name="Linear-State-VFA" Class="CLinearStateVFA-Factory" Comment="The parameterized VFA that approximates the function" Optional=" false"/>
  </CLASS>

  <CLASS Name="CLinearStateVFA">
    <DOUBLE-VALUE Name="Init-Value" Default="0.0" Comment="The initial value given to the VFA's weights on initialization"/>
    <BRANCH Name="State-Feature-Map" Class="CFeatureMap-Factory" Comment="The feature map fuction (state->features)" Optional="false"/>
  </CLASS>

  <CLASS Name="CLinearStateVFAFromFile">
    <FILE-PATH-VALUE Name="Load" Default="../config/data/*.xml" Comment="The VFA will be loaded from this file"/>
  </CLASS>

  <CLASS Name="CLinearStateVFA-Factory">
    <CHOICE Name="Parameterization" Comment= "Do we want to define the vfa explicitly or load it from file?">
      <CHOICE-ELEMENT Name="Explicit" Class="CLinearStateVFA" Comment="The parameterization is explicitly given and no weights loaded."/>
      <CHOICE-ELEMENT Name="From-File" Class="CLinearStateVFAFromFile" Comment="The parameterization and weights are read from a file."/>
    </CHOICE>
  </CLASS>

  <CLASS Name="CLinearStateActionVFA">
    <DOUBLE-VALUE Name="Init-Value" Default="0.0" Comment="The initial value given to the weights on initialization"/>
    <BRANCH Name="State-Feature-Map" Class="CFeatureMap-Factory" Comment="The state feature map" Optional="false"/>
    <BRANCH Name="Action-Feature-Map" Class="CFeatureMap-Factory" Comment="The action feature map" Optional="false"/>
  </CLASS>

  <CLASS Name="CMagneticLevitation">
    <FILE-PATH-VALUE Name="Evaluation-Set-Point" Default="../config/world/magnetic-levitation/setpoint.txt" Comment="The setpoint file"/>
  </CLASS>

  <CLASS Name="CPitchControl">
    <FILE-PATH-VALUE Name="Set-Point-File" Default="../config/world/pitch-control/setpoint.txt" Comment="The setpoint file"/>
  </CLASS>

  <CLASS Name="CUnderwaterVehicle">
    <FILE-PATH-VALUE Name="Set-Point-File" Default="../config/world/underwater-vehicle/setpoint.txt" Comment="The setpoint file"/>
  </CLASS>

  <CLASS Name="CWindTurbine">
    <FILE-PATH-VALUE Name="Evaluation-Wind-Data" Default="../config/world/wind-turbine/TurbSim-10.25.hh" Comment="The wind file used for evaluation"/>
    <FILE-PATH-VALUE Name="Power-Set-Point" Default="../config/world/wind-turbine/power-setpoint.txt" Comment="The power setpoint file"/>
    <MULTI-VALUED Name="Training-Wind-Data" Class="FILE-PATH-VALUE" Comment="The wind files used for training" Default="../config/world/wind-turbine/TurbSim-10.5.hh"/>
  </CLASS>

  <CLASS Name="CWorld">
    <INTEGER-VALUE Name="Num-Integration-Steps" Default="4" Comment="The number of integration steps performed each simulation time-step"/>
    <DOUBLE-VALUE Name="Delta-T" Default="0.01" Comment="The delta-time between simulation steps"/>
    <BRANCH Name="Dynamic-Model" Class="CDynamicModel-Factory" Comment="The dynamic model" Optional="false"/>
    <BRANCH Name="Reward" Class="CRewardFunction" Comment="The reward function" Optional="false"/>
  </CLASS>

  <CLASS Name="CDynamicModel-Factory">
    <CHOICE Name="Model" Comment="The world" LoadXML= "WORLD-DEFINITION">
      <CHOICE-ELEMENT Name="Wind-turbine" Class="CWindTurbine" XML="../config/world/wind-turbine.xml" Comment="A two-mass model of a VS Wind Turbine"/>
      <CHOICE-ELEMENT Name="Underwater-vehicle" Class="CUnderwaterVehicle" XML="../config/world/underwater-vehicle.xml" Comment="An underwater vehicle control task"/>
      <CHOICE-ELEMENT Name="Pitch-control" Class="CPitchControl" XML="../config/world/pitch-control.xml" Comment="An airplane pitch control task"/>
    </CHOICE>
  </CLASS>


</DEFINITIONS>